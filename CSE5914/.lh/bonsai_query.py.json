{
    "sourceFile": "bonsai_query.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1709762063181,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1709762063181,
            "name": "Commit-0",
            "content": "from elasticsearch import Elasticsearch, helpers\nimport os\nimport json\nimport re\n\n\n### Example setup for Bonsai.io\n#\n# bonsai = os.environ['BONSAI_URL']\n# auth = re.search('https\\:\\/\\/(.*)\\@', bonsai).group(1).split(':')\n# host = bonsai.replace('https://%s:%s@' % (auth[0], auth[1]), '')\n\n# # optional port\n# match = re.search('(:\\d+)', host)\n# if match:\n#   p = match.group(0)\n#   host = host.replace(p, '')\n#   port = int(p.split(':')[1])\n# else:\n#   port=443\n\n# # Connect to cluster over SSL using auth for best security:\n# es_header = [{\n#  'host': host,\n#  'port': port,\n#  'use_ssl': True,\n#  'http_auth': (auth[0],auth[1])\n# }]\n\n# # Instantiate the new Elasticsearch connection:\n# es = Elasticsearch(es_header)\n\nes = Elasticsearch('https://localhost:9200', ca_certs=\"http_ca.crt\", basic_auth=(\"elastic\", \"J9bfBBqfzGnlpwXwloZc\"))\n\n# res = es.search (index=\"newsgroup\", body={\"query\": {\"match\": {\"doc\": \"Stanley\"}}})\n# print(len(res[\"hits\"][\"hits\"]))\n# for doc in res[\"hits\"][\"hits\"]:\n#   print(doc)\n\n# res = es.search (index=\"newsgroup\", body={\"query\": {\"match\": {\"doc\": \"Phille\"}}})\n# print(len(res[\"hits\"][\"hits\"]))\n\n# res = es.search (index=\"newsgroup\", body={\"query\": {\"match\": {\"doc\":{\"query\": \"Phille\", \"fuzziness\": \"AUTO\"}}}}, size =10000)\n# print(len(res[\"hits\"][\"hits\"]))\n\nres = es.search(index = \"newsgroup\", body={\"query\": {\"more_like_this\": {\"fields\": [\"doc\"], \"like\": \"The first ice resurfacer was invented by Frank Zamboni, who was originally in the refrigeration business. Zamboni created a plant for making ice blocks that could be used in refrigeration applications. As the demand for ice blocks waned with the spread of compressor-based refrigeration, he looked for another way to capitalize on his expertise with ice production\"}}})\nprint(len(res[\"hits\"][\"hits\"]))\nfor doc in res[\"hits\"][\"hits\"]:\n  print(doc)\n\n"
        }
    ]
}